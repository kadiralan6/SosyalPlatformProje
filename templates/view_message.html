{% extends "base.html" %}

{% block title %}Mesaj - SABİS{% endblock %}

{% block content %}
<div class="fade-in">
  <div class="card" style="max-width: 800px; margin: 0 auto;">
    <a href="{{ url_for('messages') }}" class="btn btn-outline mb-3">← Mesajlara Dön</a>

    <div
      style="padding: 1rem; background: rgba(99, 102, 241, 0.1); border-radius: var(--radius-md); margin-bottom: 1rem;">
      <div style="display: flex; justify-content: space-between; align-items: start;">
        <div>
          <h3>{{ message.subject or 'Mesaj' }}</h3>
          <p class="text-muted">
            {% if message.sender_id == current_user.id %}
            Alıcı: <a href="{{ url_for('profile', user_id=message.recipient.id) }}">
              {{ message.recipient.first_name }} {{ message.recipient.last_name }}
            </a>
            {% else %}
            Gönderen: <a href="{{ url_for('profile', user_id=message.sender.id) }}">
              {{ message.sender.first_name }} {{ message.sender.last_name }}
            </a>
            {% endif %}
          </p>
        </div>
        <span class="text-muted">{{ message.created_at.strftime('%d.%m.%Y %H:%M') }}</span>
      </div>
    </div>

    <div style="padding: 1.5rem; background: rgba(30, 41, 59, 0.4); border-radius: var(--radius-md);">
      <p style="white-space: pre-wrap;">{{ message.content }}</p>
    </div>

    {% if message.sender_id != current_user.id %}
    <div class="mt-3">
      <a href="{{ url_for('send_message') }}?recipient={{ message.sender.id }}" class="btn btn-primary">Yanıtla</a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}