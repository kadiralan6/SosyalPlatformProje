{% extends "base.html" %}

{% block title %}Forum - SABİS{% endblock %}

{% block content %}
<div class="fade-in">
  <div class="card mb-4">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <div>
        <h2 class="card-title">Forum</h2>
        <p class="text-muted">Ortak mesajlaşma alanı</p>
      </div>
      <a href="{{ url_for('create_post') }}" class="btn btn-primary">Yeni Mesaj</a>
    </div>
  </div>

  {% for post in posts %}
  <div class="card mb-3">
    <h3><a href="{{ url_for('view_post', post_id=post.id) }}">{{ post.title }}</a></h3>
    <p class="text-muted">
      <a href="{{ url_for('profile', user_id=post.author.id) }}">{{ post.author.first_name }} {{ post.author.last_name
        }}</a>
      - {{ post.created_at.strftime('%d.%m.%Y %H:%M') }}
      {% if post.replies %}
      - {{ post.replies|length }} yanıt
      {% endif %}
    </p>
    <p>{{ post.content[:300] }}{% if post.content|length > 300 %}...{% endif %}</p>
    <a href="{{ url_for('view_post', post_id=post.id) }}" class="btn btn-outline">Devamını Oku</a>
  </div>
  {% endfor %}
</div>
{% endblock %}